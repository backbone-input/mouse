!function(o,t,e,i){{var s="undefined"!=typeof i&&"undefined"!=typeof i.View,r=s?i.View:e.View;o.jQuery||o.Zepto||o.$}o.jQuery&&o.jQuery.event.props.push("dataTransfer");var n=r.prototype.params||new e.Model;n.set({mouse:{x:0,y:0}});var a=r.extend({options:{monitorMove:!1,monitor:[],mouse:{states:["up","down","move","over","drag"]}},params:n,state:{hover:!1,drag:!1},events:t.extend({},r.prototype.events,{dragstart:"_dragstart",dragenter:"_dragenter",dragover:"_dragover",dragleave:"_dragleave",drop:"_drop",dragend:"_dragend"}),initialize:function(o){o=o||{},this.options=t.extend({},this.options,o);var e=this.options.monitorMove||t.inArray("mouse",this.options.monitor);return e&&this._monitorMouse(),r.prototype.initialize.call(this,o)},_monitorMouse:function(){if(this.el){var o=this.options.mouse.states;t.inArray("move",o)&&this.el.addEventListener("mousemove",t.bind(this._mousemove,this),!1),t.inArray("down",o)&&this.el.addEventListener("mousedown",t.bind(this._mousedown,this),!1),t.inArray("up",o)&&this.el.addEventListener("mouseup",t.bind(this._mouseup,this),!1)}},_mousedown:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("down",this.options.mouse.states);e&&(o.stopPropagation&&o.stopPropagation(),t.inDebug()&&console.log("mouse pressed",o),this.trigger("mousedown",o),this.mousedown&&this.mousedown(o))},_mouseup:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("up",this.options.mouse.states);e&&(o.stopPropagation&&o.stopPropagation(),t.inDebug()&&console.log("mouse released",o),this.trigger("mouseup",o),this.mouseup&&this.mouseup(o))},_mouseover:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("over",this.options.mouse.states);e&&(this.state.hover=!0,this.mouseover&&this.mouseover(o))},_mousemove:function(o){var e=(this.options.monitorMove||t.inArray("mouse",this.options.monitor))&&t.inArray("move",this.options.mouse.states);e&&(this.params.set({mouse:{x:o.clientX,y:o.clientY}}),t.inDebug()&&console.log("mousemove",this),this.mousemove&&this.mousemove(o))},_dragstart:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("drag",this.options.mouse.states);e&&(t.inDebug()&&console.log("_dragstart"),this.state.drag=!0,this.trigger("dragstart",o),this.trigger("drag",o))},_dragenter:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("drag",this.options.mouse.states);if(e)return t.inDebug()&&console.log("_dragenter"),this.trigger("dragenter",o),!1},_dragover:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("drag",this.options.mouse.states);e&&(t.inDebug()&&console.log("_dragover"),o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation(),this.trigger("dragover",o))},_dragleave:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("drag",this.options.mouse.states);e&&(t.inDebug()&&console.log("_dragleave"),this.trigger("dragleave",o))},_drop:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("drag",this.options.mouse.states);if(e)return t.inDebug()&&console.log("_drop"),o.stopPropagation&&o.stopPropagation(),this.trigger("drop",o),!1},_dragend:function(o){var e=t.inArray("mouse",this.options.monitor)&&t.inArray("drag",this.options.mouse.states);e&&(t.inDebug()&&console.log("_dragend"),o.stopPropagation&&o.stopPropagation(),this.trigger("dragend",o),this.state.drag=!1)}});t.mixin({inArray:function(o,t){return t.indexOf(o)>-1},inDebug:function(){return"undefined"!=typeof DEBUG&&DEBUG}}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=a:"function"==typeof define&&define.amd&&define([],function(){return a}),"object"==typeof window&&"object"==typeof window.document&&(s?(i.View=a,i.Input=i.Input||{},i.Input.Mouse=a,window.APP=i):e.View=a,e.Input=e.Input||{},e.Input.Mouse=a,window.Backbone=e)}(this.window,this._,this.Backbone,this.APP);